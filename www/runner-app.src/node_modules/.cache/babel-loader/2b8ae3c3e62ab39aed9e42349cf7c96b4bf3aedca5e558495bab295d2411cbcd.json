{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),tokenInputValue=_React$useState2[0],setTokenInputValue=_React$useState2[1];var handleTokenInputChange=function handleTokenInputChange(e){setTokenInputValue(e.currentTarget.value);};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=tokenInputValue.trim();_context.prev=1;_context.next=4;return axios.post(\"/api/v1/login\",{token:token});case 4:res=_context.sent;if(res.data.user.isAdmin){_context.next=8;break;}alert(\"You are not an administrator.\");return _context.abrupt(\"return\");case 8:localStorage.setItem(\"token\",token);window.location.replace(\"/\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);alert(\"The provided token is incorrect.\");case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"main\",{className:\"min-h-screen flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border-gray-300 border rounded-lg px-12 py-6 flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-medium\",children:\"Login\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm\",children:\"Login using your token\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tokenInputValue,onChange:handleTokenInputChange,className:\"border border-gray-500 rounded-md my-6 pl-3 py-1\",placeholder:\"Token\",\"aria-label\":\"token\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded-md bg-gray-200 px-3 py-1 border border-gray-500\",onClick:handleLogin,children:\"Login\"})]})});};export default Login;","map":{"version":3,"names":["axios","React","jsx","_jsx","jsxs","_jsxs","Login","_React$useState","useState","_React$useState2","_slicedToArray","tokenInputValue","setTokenInputValue","handleTokenInputChange","e","currentTarget","value","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","res","wrap","_callee$","_context","prev","next","trim","post","sent","data","user","isAdmin","alert","abrupt","localStorage","setItem","window","location","replace","t0","stop","apply","arguments","className","children","type","onChange","placeholder","onClick"],"sources":["C:/Projects/[Web]/[WS2024]/3-[Döntő]/www/team-admin.src/src/pages/Login.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\n\r\nconst Login = () => {\r\n  const [tokenInputValue, setTokenInputValue] = React.useState(\"\");\r\n\r\n  const handleTokenInputChange = (e: React.FormEvent<HTMLInputElement>) => {\r\n    setTokenInputValue(e.currentTarget.value);\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    const token = tokenInputValue.trim();\r\n    try {\r\n      const res = await axios.post(\"/api/v1/login\", { token });\r\n      if (!res.data.user.isAdmin) {\r\n        alert(\"You are not an administrator.\");\r\n        return;\r\n      }\r\n      localStorage.setItem(\"token\", token);\r\n      window.location.replace(\"/\");\r\n    } catch (err) {\r\n      alert(\"The provided token is incorrect.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex justify-center items-center\">\r\n      <div className=\"border-gray-300 border rounded-lg px-12 py-6 flex flex-col items-center\">\r\n        <h1 className=\"text-2xl font-medium\">Login</h1>\r\n        <h2 className=\"text-sm\">Login using your token</h2>\r\n        <input\r\n          type=\"text\"\r\n          value={tokenInputValue}\r\n          onChange={handleTokenInputChange}\r\n          className=\"border border-gray-500 rounded-md my-6 pl-3 py-1\"\r\n          placeholder=\"Token\"\r\n          aria-label=\"token\"\r\n        />\r\n        <button\r\n          className=\"rounded-md bg-gray-200 px-3 py-1 border border-gray-500\"\r\n          onClick={handleLogin}\r\n        >\r\n          Login\r\n        </button>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"+cAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClB,IAAAC,eAAA,CAA8CN,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAAzDI,eAAe,CAAAF,gBAAA,IAAEG,kBAAkB,CAAAH,gBAAA,IAE1C,GAAM,CAAAI,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAIC,CAAoC,CAAK,CACvEF,kBAAkB,CAACE,CAAC,CAACC,aAAa,CAACC,KAAK,CAAC,CAC3C,CAAC,CAED,GAAM,CAAAC,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,KAAA,CAAAC,GAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACZN,KAAK,CAAGZ,eAAe,CAACmB,IAAI,EAAE,CAAAH,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEhB,CAAA7B,KAAK,CAAC+B,IAAI,CAAC,eAAe,CAAE,CAAER,KAAK,CAALA,KAAM,CAAC,CAAC,QAAlDC,GAAG,CAAAG,QAAA,CAAAK,IAAA,IACJR,GAAG,CAACS,IAAI,CAACC,IAAI,CAACC,OAAO,EAAAR,QAAA,CAAAE,IAAA,UACxBO,KAAK,CAAC,+BAA+B,CAAC,CAAC,OAAAT,QAAA,CAAAU,MAAA,kBAGzCC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEhB,KAAK,CAAC,CACpCiB,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC,CAACf,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAgB,EAAA,CAAAhB,QAAA,aAE7BS,KAAK,CAAC,kCAAkC,CAAC,CAAC,yBAAAT,QAAA,CAAAiB,IAAA,MAAAtB,OAAA,iBAE7C,kBAbK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAA2B,KAAA,MAAAC,SAAA,OAahB,CAED,mBACE3C,IAAA,SAAM4C,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC7D3C,KAAA,QAAK0C,SAAS,CAAC,yEAAyE,CAAAC,QAAA,eACtF7C,IAAA,OAAI4C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,OAAK,EAAK,cAC/C7C,IAAA,OAAI4C,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,wBAAsB,EAAK,cACnD7C,IAAA,UACE8C,IAAI,CAAC,MAAM,CACXjC,KAAK,CAAEL,eAAgB,CACvBuC,QAAQ,CAAErC,sBAAuB,CACjCkC,SAAS,CAAC,kDAAkD,CAC5DI,WAAW,CAAC,OAAO,CACnB,aAAW,OAAO,EAClB,cACFhD,IAAA,WACE4C,SAAS,CAAC,yDAAyD,CACnEK,OAAO,CAAEnC,WAAY,CAAA+B,QAAA,CACtB,OAED,EAAS,GACL,EACD,CAEX,CAAC,CAED,cAAe,CAAA1C,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}