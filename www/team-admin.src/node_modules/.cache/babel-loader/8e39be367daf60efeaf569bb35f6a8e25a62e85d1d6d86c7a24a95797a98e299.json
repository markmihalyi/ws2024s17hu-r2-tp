{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React from\"react\";import ConfirmationWindow from\"./ManageTeam/ConfirmationWindow\";import ManageTeam from\"./ManageTeam/index\";import RunnersTable from\"./RunnersTable/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loggedIn=_React$useState2[0],setLoggedIn=_React$useState2[1];var _React$useState3=React.useState(-1),_React$useState4=_slicedToArray(_React$useState3,2),teamId=_React$useState4[0],setTeamId=_React$useState4[1];var checkIfLoggedIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var savedToken,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:savedToken=localStorage.getItem(\"token\");if(!savedToken){window.location.replace(\"/login\");}_context.prev=2;_context.next=5;return axios.post(\"/api/v1/login\",{token:savedToken});case 5:res=_context.sent;setTeamId(res.data.user.teamId);setLoggedIn(true);_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);alert(\"The token is incorrect. Please log in.\");localStorage.removeItem(\"token\");window.location.replace(\"/login\");case 15:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function checkIfLoggedIn(){return _ref.apply(this,arguments);};}();React.useEffect(function(){checkIfLoggedIn();},[]);var handleLogout=function handleLogout(){localStorage.removeItem(\"token\");window.location.replace(\"/login\");};var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),showConfirmationWindow=_React$useState6[0],setShowConfirmationWindow=_React$useState6[1];if(!loggedIn)return/*#__PURE__*/_jsx(\"main\",{className:\"min-w-screen min-h-screen flex justify-center items-center text-3xl\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"main\",{className:\"relative min-w-screen min-h-screen flex justify-center items-center mx-6\",children:[showConfirmationWindow&&/*#__PURE__*/_jsx(ConfirmationWindow,{teamId:teamId,setShowConfirmationWindow:setShowConfirmationWindow}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-400 rounded-lg mx-auto flex flex-col px-8 py-6 w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between w-full items-start\",children:[/*#__PURE__*/_jsx(ManageTeam,{setShowConfirmationWindow:setShowConfirmationWindow}),/*#__PURE__*/_jsxs(\"button\",{className:\"px-2 py-1 rounded-md bg-gray-200 border border-gray-500 font-medium\",onClick:handleLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-sign-out-alt mr-1\"}),\" Logout\"]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-6\"}),/*#__PURE__*/_jsx(RunnersTable,{teamId:teamId})]})]});};export default Home;","map":{"version":3,"names":["axios","React","ConfirmationWindow","ManageTeam","RunnersTable","jsx","_jsx","jsxs","_jsxs","Home","_React$useState","useState","_React$useState2","_slicedToArray","loggedIn","setLoggedIn","_React$useState3","_React$useState4","teamId","setTeamId","checkIfLoggedIn","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","savedToken","res","wrap","_callee$","_context","prev","next","localStorage","getItem","window","location","replace","post","token","sent","data","user","t0","alert","removeItem","stop","apply","arguments","useEffect","handleLogout","_React$useState5","_React$useState6","showConfirmationWindow","setShowConfirmationWindow","className","children","onClick"],"sources":["C:/Projects/[Web]/[WS2024]/3-[Döntő]/www/team-admin.src/src/pages/Home/index.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\nimport ConfirmationWindow from \"./ManageTeam/ConfirmationWindow\";\r\nimport ManageTeam from \"./ManageTeam/index\";\r\nimport RunnersTable from \"./RunnersTable/index\";\r\n\r\nconst Home = () => {\r\n  const [loggedIn, setLoggedIn] = React.useState<boolean>(false);\r\n  const [teamId, setTeamId] = React.useState<number>(-1);\r\n\r\n  const checkIfLoggedIn = async () => {\r\n    const savedToken = localStorage.getItem(\"token\");\r\n    if (!savedToken) {\r\n      window.location.replace(\"/login\");\r\n    }\r\n\r\n    try {\r\n      const res = await axios.post(\"/api/v1/login\", { token: savedToken });\r\n      setTeamId(res.data.user.teamId);\r\n      setLoggedIn(true);\r\n    } catch (err) {\r\n      alert(\"The token is incorrect. Please log in.\");\r\n      localStorage.removeItem(\"token\");\r\n      window.location.replace(\"/login\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    checkIfLoggedIn();\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    window.location.replace(\"/login\");\r\n  };\r\n\r\n  const [showConfirmationWindow, setShowConfirmationWindow] =\r\n    React.useState<boolean>(false);\r\n\r\n  if (!loggedIn)\r\n    return (\r\n      <main className=\"min-w-screen min-h-screen flex justify-center items-center text-3xl\">\r\n        Loading...\r\n      </main>\r\n    );\r\n\r\n  return (\r\n    <main className=\"relative min-w-screen min-h-screen flex justify-center items-center mx-6\">\r\n      {showConfirmationWindow && (\r\n        <ConfirmationWindow\r\n          teamId={teamId}\r\n          setShowConfirmationWindow={setShowConfirmationWindow}\r\n        />\r\n      )}\r\n      <div className=\"border border-gray-400 rounded-lg mx-auto flex flex-col px-8 py-6 w-full\">\r\n        <div className=\"flex justify-between w-full items-start\">\r\n          <ManageTeam setShowConfirmationWindow={setShowConfirmationWindow} />\r\n          <button\r\n            className=\"px-2 py-1 rounded-md bg-gray-200 border border-gray-500 font-medium\"\r\n            onClick={handleLogout}\r\n          >\r\n            <i className=\"fa fa-sign-out-alt mr-1\"></i> Logout\r\n          </button>\r\n        </div>\r\n        <hr className=\"my-6\" />\r\n        <RunnersTable teamId={teamId} />\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}