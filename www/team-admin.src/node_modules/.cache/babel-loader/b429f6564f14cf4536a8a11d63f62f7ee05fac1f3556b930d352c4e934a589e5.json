{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/[Web]/[WS2024]/3-[D\\xF6nt\\u0151]/www/team-admin.src/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ManageTeam=function ManageTeam(_ref){var setShowConfirmationWindow=_ref.setShowConfirmationWindow;var _React$useState=React.useState(-1),_React$useState2=_slicedToArray(_React$useState,2),teamId=_React$useState2[0],setTeamId=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),originalTeamData=_React$useState4[0],setOriginalTeamData=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),teamName=_React$useState6[0],setTeamName=_React$useState6[1];var teamNameChanged=function teamNameChanged(e){setTeamName(e.currentTarget.value);};var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),contactEmail=_React$useState8[0],setContactEmail=_React$useState8[1];var contactEmailChanged=function contactEmailChanged(e){setContactEmail(e.currentTarget.value);};var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),location=_React$useState10[0],setLocation=_React$useState10[1];var locationChanged=function locationChanged(e){setLocation(e.currentTarget.value);};var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),inputChanged=_React$useState12[0],setInputChanged=_React$useState12[1];React.useEffect(function(){if(originalTeamData){if(originalTeamData.name===teamName&&originalTeamData.contactEmail===contactEmail&&originalTeamData.location===location){setInputChanged(false);}else{setInputChanged(true);}}},[teamName,contactEmail,location]);var loadTeamData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,res,team;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");_context.next=3;return axios.get(\"/api/v1/me\",{headers:{Authorization:\"Bearer \"+token}});case 3:res=_context.sent;team=res.data.team;setOriginalTeamData(team);setTeamId(team.id);setTeamName(team.name);setContactEmail(team.contactEmail);setLocation(team.location);case 10:case\"end\":return _context.stop();}},_callee);}));return function loadTeamData(){return _ref2.apply(this,arguments);};}();React.useEffect(function(){loadTeamData();},[]);var handleSave=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var token,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"token\");_context2.prev=1;_context2.next=4;return axios.put(\"/api/v1/teams/\".concat(teamId),{name:teamName,contactEmail:contactEmail,location:location},{headers:{Authorization:\"Bearer \"+token}});case 4:res=_context2.sent;setOriginalTeamData(res.data);setInputChanged(false);alert(\"The team's data has been updated.\");_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);alert(\"Unknown error occured.\");case 13:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function handleSave(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"w-[20vw] flex flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-medium mb-4\",children:\"Manage your team\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"teamName\",children:\"Team name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-gray-500 rounded-md pl-2 py-1\",type:\"text\",value:teamName,onChange:teamNameChanged,id:\"teamName\",\"aria-label\":\"teamName\"}),/*#__PURE__*/_jsx(\"label\",{className:\"mt-1\",htmlFor:\"contactEmail\",children:\"Contact email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-gray-500 rounded-md pl-2 py-1\",type:\"text\",value:contactEmail,onChange:contactEmailChanged,id:\"contactEmail\",\"aria-label\":\"contactEmail\"}),/*#__PURE__*/_jsx(\"label\",{className:\"mt-1\",htmlFor:\"location\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{className:\"border border-gray-500 rounded-md pl-2 py-1\",type:\"text\",value:location,onChange:locationChanged,id:\"location\",\"aria-label\":\"location\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full justify-end mt-3 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"rounded-md bg-red-200 px-2 py-1 border border-red-500 font-medium\",onClick:function onClick(){return setShowConfirmationWindow(true);},children:\"Delete team\"}),inputChanged?/*#__PURE__*/_jsx(\"button\",{className:\"rounded-md bg-gray-200 px-2 py-1 border border-gray-500 font-medium\",onClick:handleSave,children:\"Save\"}):/*#__PURE__*/_jsx(\"button\",{className:\"rounded-md bg-gray-200 px-2 py-1 border border-gray-500 font-medium text-gray-300\",onClick:handleSave,disabled:true,children:\"Save\"})]})]});};export default ManageTeam;","map":{"version":3,"names":["axios","React","jsx","_jsx","jsxs","_jsxs","ManageTeam","_ref","setShowConfirmationWindow","_React$useState","useState","_React$useState2","_slicedToArray","teamId","setTeamId","_React$useState3","_React$useState4","originalTeamData","setOriginalTeamData","_React$useState5","_React$useState6","teamName","setTeamName","teamNameChanged","e","currentTarget","value","_React$useState7","_React$useState8","contactEmail","setContactEmail","contactEmailChanged","_React$useState9","_React$useState10","location","setLocation","locationChanged","_React$useState11","_React$useState12","inputChanged","setInputChanged","useEffect","name","loadTeamData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","res","team","wrap","_callee$","_context","prev","next","localStorage","getItem","get","headers","Authorization","sent","data","id","stop","apply","arguments","handleSave","_ref3","_callee2","_callee2$","_context2","put","concat","alert","t0","className","children","htmlFor","type","onChange","onClick","disabled"],"sources":["C:/Projects/[Web]/[WS2024]/3-[Döntő]/www/team-admin.src/src/pages/Home/ManageTeam/index.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\nimport ConfirmationWindow from \"./ConfirmationWindow\";\r\n\r\ntype Team = {\r\n  id: number;\r\n  name: string;\r\n  contactEmail: string;\r\n  location: string;\r\n  plannedStartingTime: string;\r\n  startingTime: string | null;\r\n};\r\n\r\ntype Props = {\r\n  setShowConfirmationWindow: React.Dispatch<React.SetStateAction<boolean>>;\r\n};\r\n\r\nconst ManageTeam: React.FC<Props> = ({ setShowConfirmationWindow }) => {\r\n  const [teamId, setTeamId] = React.useState<number>(-1);\r\n\r\n  const [originalTeamData, setOriginalTeamData] = React.useState<Team | null>();\r\n\r\n  const [teamName, setTeamName] = React.useState<string>(\"\");\r\n  const teamNameChanged = (e: React.FormEvent<HTMLInputElement>) => {\r\n    setTeamName(e.currentTarget.value);\r\n  };\r\n  const [contactEmail, setContactEmail] = React.useState<string>(\"\");\r\n  const contactEmailChanged = (e: React.FormEvent<HTMLInputElement>) => {\r\n    setContactEmail(e.currentTarget.value);\r\n  };\r\n  const [location, setLocation] = React.useState<string>(\"\");\r\n  const locationChanged = (e: React.FormEvent<HTMLInputElement>) => {\r\n    setLocation(e.currentTarget.value);\r\n  };\r\n\r\n  const [inputChanged, setInputChanged] = React.useState<boolean>(false);\r\n  React.useEffect(() => {\r\n    if (originalTeamData) {\r\n      if (\r\n        originalTeamData.name === teamName &&\r\n        originalTeamData.contactEmail === contactEmail &&\r\n        originalTeamData.location === location\r\n      ) {\r\n        setInputChanged(false);\r\n      } else {\r\n        setInputChanged(true);\r\n      }\r\n    }\r\n  }, [teamName, contactEmail, location]);\r\n\r\n  const loadTeamData = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const res = await axios.get(\"/api/v1/me\", {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    const team = res.data.team;\r\n    setOriginalTeamData(team);\r\n    setTeamId(team.id);\r\n    setTeamName(team.name);\r\n    setContactEmail(team.contactEmail);\r\n    setLocation(team.location);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    loadTeamData();\r\n  }, []);\r\n\r\n  const handleSave = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    try {\r\n      const res = await axios.put(\r\n        `/api/v1/teams/${teamId}`,\r\n        {\r\n          name: teamName,\r\n          contactEmail,\r\n          location,\r\n        },\r\n        { headers: { Authorization: \"Bearer \" + token } }\r\n      );\r\n\r\n      setOriginalTeamData(res.data as Team);\r\n      setInputChanged(false);\r\n\r\n      alert(\"The team's data has been updated.\");\r\n    } catch (err) {\r\n      alert(\"Unknown error occured.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-[20vw] flex flex-col\">\r\n      <h1 className=\"text-2xl font-medium mb-4\">Manage your team</h1>\r\n      <label htmlFor=\"teamName\">Team name</label>\r\n      <input\r\n        className=\"border border-gray-500 rounded-md pl-2 py-1\"\r\n        type=\"text\"\r\n        value={teamName}\r\n        onChange={teamNameChanged}\r\n        id=\"teamName\"\r\n        aria-label=\"teamName\"\r\n      />\r\n      <label className=\"mt-1\" htmlFor=\"contactEmail\">\r\n        Contact email\r\n      </label>\r\n      <input\r\n        className=\"border border-gray-500 rounded-md pl-2 py-1\"\r\n        type=\"text\"\r\n        value={contactEmail}\r\n        onChange={contactEmailChanged}\r\n        id=\"contactEmail\"\r\n        aria-label=\"contactEmail\"\r\n      />\r\n      <label className=\"mt-1\" htmlFor=\"location\">\r\n        Location\r\n      </label>\r\n      <input\r\n        className=\"border border-gray-500 rounded-md pl-2 py-1\"\r\n        type=\"text\"\r\n        value={location}\r\n        onChange={locationChanged}\r\n        id=\"location\"\r\n        aria-label=\"location\"\r\n      />\r\n\r\n      <div className=\"flex w-full justify-end mt-3 space-x-2\">\r\n        <button\r\n          className=\"rounded-md bg-red-200 px-2 py-1 border border-red-500 font-medium\"\r\n          onClick={() => setShowConfirmationWindow(true)}\r\n        >\r\n          Delete team\r\n        </button>\r\n        {inputChanged ? (\r\n          <button\r\n            className=\"rounded-md bg-gray-200 px-2 py-1 border border-gray-500 font-medium\"\r\n            onClick={handleSave}\r\n          >\r\n            Save\r\n          </button>\r\n        ) : (\r\n          <button\r\n            className=\"rounded-md bg-gray-200 px-2 py-1 border border-gray-500 font-medium text-gray-300\"\r\n            onClick={handleSave}\r\n            disabled\r\n          >\r\n            Save\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageTeam;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}